!function(){function e(e){e.font="16px Arial",e.fillStyle="black",e.fillText("GAME OVER",40,40)}function t(e,t,i,s,o){e.font="16px Arial",e.fillStyle="black",e.fillText(t+i,s,o)}function i(e,t){if(t)return e.center.x-e.size.x/2<t.x&&t.x<e.center.x+e.size.x/2}var s=function(e){function t(){r.update(),r.draw(s,o)}var i=document.getElementById(e),s=i.getContext("2d"),o={x:i.width,y:i.height};this.score=0,this.life=3,this.levelColours={levelOne:"blue",levelTwo:"red",levelThree:"green"},this.bodies={bricks:h(this),player:new n(this,o),ball:new l(this,o,{x:150,y:140},{x:0,y:0})};var r=this,a={paddle:"sounds/paddle3.wav",bricks:"sounds/paddle.wav",wall:"sounds/bg-music.mp3",levelUp:"sounds/levelup.mp3",lostLife:"sounds/game-over.wav",gameOver:"sounds/over.wav",background:"sounds/game-over.wav"};this.brickAudio=document.createElement("audio"),this.paddleAudio=document.createElement("audio"),this.gameOver=document.createElement("audio"),this.lostLife=document.createElement("audio"),this.levelUp=document.createElement("audio"),this.paddle=document.createElement("audio"),this.brickAudio.setAttribute("src","sounds/paddle3.wav"),this.paddleAudio.setAttribute("src","sounds/paddle.wav"),this.gameOver.setAttribute("src","sounds/over.wav"),this.lostLife.setAttribute("src","sounds/game-over.wav"),this.levelUp.setAttribute("src","sounds/levelup.mp3"),this.paddle.setAttribute("src","sounds/bricks.wav"),setInterval(t,10)};s.prototype={update:function(){var e=this.bodies.ball;this.bodies.bricks=this.bodies.bricks.filter(function(t){return!c(t,e)}),this.bodies.player.update(),this.bodies.ball.update()},draw:function(e,i){e.clearRect(0,0,i.x,i.y),o(e,this.bodies.player),o(e,this.bodies.ball),t(e,"Score: ",this.score,13,20),t(e,"Lives: ",this.life,232,20);for(var s=0;s<this.bodies.bricks.length;s++)o(e,this.bodies.bricks[s]);0==this.life&&(this.gameOver.play(),e.font="16px Arial",e.fillStyle="black",e.fillText("GAME OVER",100,100))}};var o=function(e,t){e.fillRect(t.center.x-t.size.x/2,t.center.y-t.size.y/2,t.size.x,t.size.y),r(e,this.score),e.fill(),e.closePath()},r=function(e,t){e.fillStyle=t>=70?this.levelThree:t>=35?this.levelTwo:this.levelOne},n=function(e,t){this.game=e,this.size={x:70,y:6},this.center={x:t.x/2,y:t.y-2},this.keyboarder=new u,this.gameSize=t};n.prototype={update:function(){this.keyboarder.isDown(this.keyboarder.KEYS.LEFT)?this.center.x-=2:this.keyboarder.isDown(this.keyboarder.KEYS.RIGHT)?this.center.x+=2:this.keyboarder.isDown(this.keyboarder.KEYS.SPACE)&&(this.game.bodies.ball.velocity={x:1,y:-1})}};var l=function(e,t,i,s){this.game=e,this.size={x:4,y:4},this.center=i,this.velocity=s,this.gameSize=t};l.prototype={update:function(){if(this.center.x+=this.velocity.x,this.center.y+=this.velocity.y,this.center.y<this.size.x/2&&(this.game.paddleAudio.play(),this.velocity.y=-this.velocity.y),(this.center.x>this.gameSize.x-this.size.x/2||this.center.x<this.size.x/2)&&(this.game.paddleAudio.play(),this.velocity.x=-this.velocity.x),this.center.y>this.gameSize.y&&(this.game.lostLife.play(),this.game.life>0&&(this.game.life-=1),this.center={x:150,y:140},this.velocity={x:0,y:0}),this.center.y==this.gameSize.y-this.size.x/2&&i(this.game.bodies.player,this.center)){var e=Math.round((this.center.x-this.game.bodies.player.center.x)/this.game.bodies.player.size.x*6)+4;this.game.paddle.play(),d(this.velocity,e),this.velocity.y=-this.velocity.y}for(var t=0;t<this.game.bodies.bricks.length;t++)c(this.game.bodies.bricks[t],this)&&(this.game.score+=1,this.game.brickAudio.play(),this.velocity.y=-this.velocity.y)}};var a=function(e,t){this.game=e,this.size={x:15,y:7},this.center=t};a.prototype={update:function(){}};var h=function(e){for(var t=[],i=0;i<100;i++){var s=20+i%25*20,o=30+i%4*10;t.push(new a(e,{x:s,y:o}))}return t},c=function(e,t){var i=e.center.x-e.size.x/2,s=e.center.y-e.size.y/2;return t.center.x>i&&t.center.x<i+e.size.x&&t.center.y>s&&t.center.y<s+e.size.y},d=function(e,t){e.x>0?e.x=1==t?.25-e.x:2==t?.1-e.x:3==t?-e.x-.1:4==t?e.x+.1:5==t?e.x+.25:e.x+.5:e.x=1==t?e.x-.5:2==t?e.x-.25:3==t?e.x-.1:4==t?.1-e.x:5==t?-e.x-.1:-e.x-.25},u=function(){var e={};window.onkeydown=function(t){e[t.keyCode]=!0},window.onkeyup=function(t){e[t.keyCode]=!1},this.isDown=function(t){return!0===e[t]},this.KEYS={LEFT:37,RIGHT:39,SPACE:32}};window.onload=function(){new s("screen")}}();