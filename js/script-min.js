function drawLives(){ctx.font="16px Arial",ctx.fillStyle="#0095DD",ctx.fillText("Lives: "+lives,canvas.width-65,20)}function drawBricks(){for(c=0;c<brickColumnCount;c++)for(r=0;r<brickRowCount;r++)if(1==bricks[c][r].status){var e=c*(brickWidth+brickPadding)+brickOffsetLeft,d=r*(brickHeight+brickPadding)+brickOffsetTop;bricks[c][r].x=e,bricks[c][r].y=d,ctx.beginPath(),ctx.rect(e,d,brickWidth,brickHeight),ctx.fillStyle=score>levelThree?levelThreeColour:score>levelTwo?levelTwoColour:levelOneColour,ctx.fill(),ctx.closePath()}}function resetBricks(){for(c=0;c<brickColumnCount;c++)for(r=0;r<brickRowCount;r++)bricks[c][r].status=1}function drawPaddle(){ctx.beginPath(),ctx.rect(paddleX,canvas.height-paddleHeight,paddleWidth,paddleHeight),ctx.fillStyle=levelOneColour,ctx.fill(),ctx.closePath()}function drawBall(){ctx.beginPath(),ctx.arc(x,y,ballRadius,0,2*Math.PI),ctx.fillStyle=levelOneColour,ctx.fill(),ctx.closePath()}function draw(){if(start(),ctx.clearRect(0,0,canvas.width,canvas.height),drawBricks(),drawBall(),drawPaddle(),collisionDetection(),drawScore(),drawLives(),drawStart(),x+=dx,(y+=dy)+dy<ballRadius)paddleAudio.play(),dy=-dy;else if(y+dy>canvas.height-ballRadius)if(x>paddleX&&x<paddleX+paddleWidth+5){var e=Math.round((x-paddleX)/120*6);wall.play(),dy=-dy,dx>0?(console.log("+"),1==e?dx=1-dx:2==e?dx=-dx:3==e?dx=dx:dx+=1):(console.log("-"),1==e?dx-=1:dx=2==e?dx:3==e?-dx:-dx-1,console.log(dx))}else lives?(x=canvas.width/2,y=canvas.height-30,dx=0,dy=0,lives-=1):(alert("GAME OVER"),document.location.reload());(x+dx>canvas.width-ballRadius||x+dx<ballRadius)&&(paddleAudio.play(),dx=-dx),rightPressed&&paddleX<canvas.width-paddleWidth?paddleX+=7:leftPressed&&paddleX>0&&(paddleX-=7),score==levelTwo&&(paddleWidth=70),score==levelThree&&(paddleWidth=50)}function start(){spacePressed&&(dx=speed,dy=-speed,musicAudio.volume=.3),spacePressed=!1}function keyDownHandler(e){39==e.keyCode?rightPressed=!0:37==e.keyCode?leftPressed=!0:32==e.keyCode&&(spacePressed=!0)}function keyUpHandler(e){39==e.keyCode?rightPressed=!1:37==e.keyCode&&(leftPressed=!1)}function collisionDetection(){for(c=0;c<brickColumnCount;c++)for(r=0;r<brickRowCount;r++){var e=bricks[c][r];1==e.status&&x>e.x&&x<e.x+brickWidth&&y>e.y&&y<e.y+brickHeight&&(dy=-dy,e.status=0,score++,brickAudio.play(),bricksRemaining-=1,score==brickRowCount*brickColumnCount&&(gameOver.play(),level=3,x=canvas.width/2,y=canvas.height-30,dx=0,dy=0,paddleX=(canvas.width-paddleWidth)/2,resetBricks(),score=0))}}function drawScore(){ctx.font="16px Arial",ctx.fillStyle="0095DD",ctx.fillText("Score: "+score,8,20)}function drawStart(){0==dx&&(ctx.font="16px Arial",ctx.fillStyle="#424242",ctx.fillText("Spacebar to Start",285,300))}var canvas=document.getElementById("myCanvas"),ctx=canvas.getContext("2d"),x=canvas.width/2,y=canvas.height-30,dx=0,dy=0,ballRadius=5,paddleHeight=9,paddleWidth=120,paddleX=(canvas.width-paddleWidth)/2,rightPressed=!1,leftPressed=!1,spacePressed=!1,level=0,speed=2,levelTwo=70,levelThree=140,brickRowCount=10,brickColumnCount=21,brickWidth=30,brickHeight=10,brickPadding=3,brickOffsetTop=40,brickOffsetLeft=5,bricksRemaining=brickColumnCount*brickRowCount,score=0,lives=3,levelOneColour="black",levelOneBG="#1c69ad",levelThreeColour="red",levelThreeBG="#ce3779",levelTwoColour="blue",levelTwoBG="#277bc6",brickAudio=document.createElement("audio"),paddleAudio=document.createElement("audio"),musicAudio=document.createElement("audio"),gameOver=document.createElement("audio"),levelUp=document.createElement("audio"),wall=document.createElement("audio");musicAudio.volume=.2,musicAudio.loop=!0,brickAudio.setAttribute("src","sounds/paddle3.wav"),paddleAudio.setAttribute("src","sounds/paddle.wav"),musicAudio.setAttribute("src","sounds/bg-music.mp3"),gameOver.setAttribute("src","sounds/game-over.wav"),levelUp.setAttribute("src","sounds/levelup.mp3"),wall.setAttribute("src","sounds/bricks.wav");var bricks=[];for(c=0;c<brickColumnCount;c++)for(bricks[c]=[],r=0;r<brickRowCount;r++)bricks[c][r]={x:0,y:0,status:1};document.addEventListener("keydown",keyDownHandler,!1),document.addEventListener("keyup",keyUpHandler,!1),start(),setInterval(draw,10);