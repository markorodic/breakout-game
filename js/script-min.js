!function(){function e(e,i,t,s,n,r,o){e.fillText(i+t,s,n)}function i(e,i){if(i)return e.center.x-e.size.x/2<i.x&&i.x<e.center.x+e.size.x/2}var t=function(e){function i(){o.update(),o.draw(s,n,t)}var t=document.getElementById(e),s=t.getContext("2d"),n={x:t.width,y:t.height};Object.keys(r).forEach(function(e){r[e]=new Audio(r[e])}),this.bodies={bricks:v(this),player:new h(this,n),ball:new d(this,n,{x:250,y:450},l)},this.score=0,this.life=3;var o=this;setInterval(i,10)},s={One:"0",Two:"100",Three:"200",Four:"300",Five:"400"},n={levelOne:["black","#eee","grey"],levelTwo:["#35f2bf","#ff3456","#c61f3b"],levelThree:["#dbff3f","#5f3fff","#4027bc"],levelFour:["#ffb800","#18bff7","#1193bf"],levelFive:["#c92ded","#eded2b","#c6c623"]};t.prototype={update:function(){var e=this.bodies.ball;this.bodies.bricks=this.bodies.bricks.filter(function(i){return!x(i,e)}),this.bodies.player.update(),e.update()},draw:function(i,t,r){i.clearRect(0,0,t.x,t.y);var l=o(s,this.score);e(i,"Score: ",this.score,13,20,l,n),e(i,"Lives: ",this.life,t.x-70,20,l,n),a(i,this.bodies.ball,l,n),a(i,this.bodies.player,l,n);for(var h=0;h<this.bodies.bricks.length;h++)a(i,this.bodies.bricks[h],l,n);c(i,r,n,l,this.audio)}};var r={paddle:"sounds/paddle.wav",wall:"sounds/wall.wav",brick:"sounds/bricks.wav",levelUp:"sounds/levelup.mp3",lostLife:"sounds/game-over.wav",gameOver:"sounds/over.wav"},o=function(e,i){return e.Five<i?"Five":e.Four<i?"Four":e.Three<i?"Three":e.Two<i?"Two":e.One<=i?"One":void 0},c=function(e,i,t,s,n){var r="level"+s,o=document.getElementsByTagName("body");e.fillStyle=t[r][0],i.style.bg=t[r][1],"One"!==s&&n.levelUp.play()},a=function(e,i,t,s){e.fillRect(i.center.x-i.size.x/2,i.center.y-i.size.y/2,i.size.x,i.size.y)},l={ballHit:function(e,t){return e.bodies.ball.center.y==t.y-e.bodies.ball.radius&&i(e.bodies.player,e.bodies.ball.center)},brickHit:function(e,i){for(var t=0;t<e.bodies.bricks.length;t++)if(x(e.bodies.bricks[t],e.bodies.ball))return!0}},h=function(e,i){this.size={x:100,y:10},this.center={x:i.x/2,y:i.y-2},this.keyboarder=new p};h.prototype={update:function(){this.keyboarder.isDown(this.keyboarder.KEYS.LEFT)?this.center.x-=4:this.keyboarder.isDown(this.keyboarder.KEYS.RIGHT)?this.center.x+=4:this.keyboarder.isDown(this.keyboarder.KEYS.SPACE)&&(y.x=2,y.y=-2)}};var y={x:0,y:0},d=function(e,i,t,s){this.game=e,this.size={x:8,y:8},this.center=t,this.velocity=y,this.gameSize=i,this.radius=this.size.x/2,this.gameMan=s};d.prototype={update:function(){this.center.y<this.radius&&(r.paddle.play(),this.velocity.y=-this.velocity.y),(this.center.x>this.gameSize.x-this.radius||this.center.x<this.radius)&&(r.wall.play(),this.velocity.x=-this.velocity.x),this.center.y>this.gameSize.y&&(r.lostLife.play(),u(this.game),this.center={x:250,y:450},this.velocity.x=0,this.velocity.y=0),this.gameMan.ballHit(this.game,this.gameSize)&&(this.velocity.y=-this.velocity.y,r.paddle.play()),this.center.x+=this.velocity.x,this.center.y+=this.velocity.y,this.gameMan.brickHit(this.game,this.gameSize)&&(this.score+=1,r.brick.play(),this.velocity.y=-this.velocity.y,f(this.game))}};var u=function(e){e.life>0&&(e.life-=1)},f=function(e){e.score+=1},b=function(e,i){this.game=e,this.size={x:20,y:7},this.center=i};b.prototype={update:function(){}};var v=function(e){for(var i=[],t=0;t<540;t++){var s=22+t%20*24,n=40+t%27*10;i.push(new b(e,{x:s,y:n}))}return i},x=function(e,i){var t=e.center.x-e.size.x/2,s=e.center.y-e.size.y/2;return i.center.x>t&&i.center.x<t+e.size.x&&i.center.y>s&&i.center.y<s+e.size.y},p=function(){var e={};window.onkeydown=function(i){e[i.keyCode]=!0},window.onkeyup=function(i){e[i.keyCode]=!1},this.isDown=function(i){return!0===e[i]},this.KEYS={LEFT:37,RIGHT:39,SPACE:32}};window.onload=function(){new t("screen")}}();