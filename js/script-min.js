!function(){function e(e,t,i,s,o,r,n){e.fillStyle=n["level"+r][0],e.fillText(t+i,s,o)}function t(e,t){if(t)return e.center.x-e.size.x/2<t.x&&t.x<e.center.x+e.size.x/2}var i=function(e){function t(){a.update(),a.draw(s,o,i,r,l)}var i=document.getElementById(e),s=i.getContext("2d"),o={x:i.width,y:i.height},r={One:"0",Two:"100",Three:"200",Four:"300",Five:"400"},l={levelOne:["black","#eee","grey"],levelTwo:["#35f2bf","#ff3456","#c61f3b"],levelThree:["#dbff3f","#5f3fff","#4027bc"],levelFour:["#ffb800","#18bff7","#1193bf"],levelFive:["#c92ded","#eded2b","#c6c623"]};this.bodies={bricks:y(this),player:new n(this,o),ball:new c(this,o,{x:250,y:450})};var a=this,d={paddle:"sounds/paddle3.wav",bricks:"sounds/paddle.wav",wall:"sounds/bg-music.mp3",levelUp:"sounds/levelup.mp3",lostLife:"sounds/game-over.wav",gameOver:"sounds/over.wav",background:"sounds/game-over.wav"};this.brickAudio=document.createElement("audio"),this.paddleAudio=document.createElement("audio"),this.gameOver=document.createElement("audio"),this.lostLife=document.createElement("audio"),this.levelUp=document.createElement("audio"),this.paddle=document.createElement("audio"),this.brickAudio.setAttribute("src","sounds/paddle3.wav"),this.paddleAudio.setAttribute("src","sounds/paddle.wav"),this.gameOver.setAttribute("src","sounds/over.wav"),this.lostLife.setAttribute("src","sounds/game-over.wav"),this.levelUp.setAttribute("src","sounds/levelup.mp3"),this.paddle.setAttribute("src","sounds/bricks.wav"),this.gameOver.loop=!1,setInterval(t,10)};i.prototype={update:function(){var e=this.bodies.ball;this.bodies.bricks=this.bodies.bricks.filter(function(t){return!v(t,e)}),this.bodies.player.update(),e.update()},draw:function(t,i,n,l,c){t.clearRect(0,0,i.x,i.y);var a=s(l,this.bodies.player.score);e(t,"Score: ",this.bodies.player.score,13,20,a,c),e(t,"Lives: ",this.bodies.player.life,i.x-70,20,a,c),r(t,this.bodies.ball,a,c),r(t,this.bodies.player,a,c);for(var d=0;d<this.bodies.bricks.length;d++)r(t,this.bodies.bricks[d],a,c);o(t,n,c,a,this.levelUp)}};var s=function(e,t){return e.Five<t?"Five":e.Four<t?"Four":e.Three<t?"Three":e.Two<t?"Two":e.One<=t?"One":void 0},o=function(e,t,i,s,o){var r="level"+s;e.fillStyle=i[r][0],t.style.background=i[r][1],t.style.border="8px solid "+i[r][2]},r=function(e,t,i,s){e.fillStyle=s["level"+i][0],e.fillRect(t.center.x-t.size.x/2,t.center.y-t.size.y/2,t.size.x,t.size.y)},n=function(e,t){this.size={x:100,y:10},this.center={x:t.x/2,y:t.y-2},this.keyboarder=new x,this.gameSize=t,this.score=0,this.life=3};n.prototype={update:function(){this.keyboarder.isDown(this.keyboarder.KEYS.LEFT)?this.center.x-=4:this.keyboarder.isDown(this.keyboarder.KEYS.RIGHT)?this.center.x+=4:this.keyboarder.isDown(this.keyboarder.KEYS.SPACE)&&(l.x=2,l.y=-2)}};var l={x:0,y:0},c=function(e,t,i){this.game=e,this.size={x:8,y:8},this.center=i,this.velocity=l,this.gameSize=t,this.radius=this.size.x/2};c.prototype={update:function(){if(this.center.x+=this.velocity.x,this.center.y+=this.velocity.y,this.center.y<this.radius&&(this.game.paddleAudio.play(),this.velocity.y=-this.velocity.y),(this.center.x>this.gameSize.x-this.radius||this.center.x<this.radius)&&(this.game.paddleAudio.play(),this.velocity.x=-this.velocity.x),this.center.y>this.gameSize.y&&(this.game.lostLife.play(),this.life>0&&(this.life-=1),this.center={x:250,y:450},console.log(this.velocity),this.velocity.x=0,this.velocity.y=0,console.log(this.velocity)),this.center.y==this.gameSize.y-this.radius&&t(this.game.bodies.player,this.center)){var e=Math.round((this.center.x-this.game.bodies.player.center.x)/this.game.bodies.player.size.x*6)+4;this.game.paddle.play(),f(this.velocity,e),this.velocity.y=-this.velocity.y-.05}for(var i=0;i<this.game.bodies.bricks.length;i++)v(this.game.bodies.bricks[i],this)&&(this.score+=1,this.game.brickAudio.play(),this.velocity.y=-this.velocity.y)}};var a=function(e){console.log(e)},d=function(e){e.life+=1},h=function(e){e.score+=1},u=function(e,t){this.game=e,this.size={x:20,y:7},this.center=t};u.prototype={update:function(){}};var y=function(e){for(var t=[],i=0;i<540;i++){var s=22+i%20*24,o=40+i%27*10;t.push(new u(e,{x:s,y:o}))}return t},v=function(e,t){var i=e.center.x-e.size.x/2,s=e.center.y-e.size.y/2;return t.center.x>i&&t.center.x<i+e.size.x&&t.center.y>s&&t.center.y<s+e.size.y},f=function(e,t){e.x>0?e.x=1==t?.25-e.x:2==t?-e.x:3==t?-e.x-.25:4==t?e.x+.5:5==t?e.x+.75:e.x+1:(e.x=e.x,e.x=1==t?e.x-1:2==t?e.x-.75:3==t?e.x-.5:4==t?.25-e.x:5==t?-e.x:-e.x-.25)},x=function(){var e={};window.onkeydown=function(t){e[t.keyCode]=!0},window.onkeyup=function(t){e[t.keyCode]=!1},this.isDown=function(t){return!0===e[t]},this.KEYS={LEFT:37,RIGHT:39,SPACE:32}};window.onload=function(){new i("screen")}}();